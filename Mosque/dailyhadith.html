<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Daily Hadith</title>
  </head>
  <body>
    <!-- FILE PICKER -->
    <input type="file" accept=".csv" id="picker">

    <!-- DISPLAY VERSE HERE -->
    <p id="verse"></p>

    <script type="text/javascript">
    const date = new Date();

    window.onload = () => {
        // FILE READER + HTML ELEMENTS
        var reader = new FileReader(),
            picker = document.getElementById("picker");
        
        // READ CSV ON FILE PICK
        picker.onchange = () => reader.readAsText(picker.files[0]);

        // READ THE CSV FILE & GENERATE HTML
        reader.onloadend = () => {
            // HIDE FILE PICKER
            picker.style.display = 'none';

            // ENTIRE CSV FILE
            let csv = reader.result;

            // SPLIT INTO ROWS
            let rows = csv.split("\r\n");
            
            // LOOP THROUGH ROWS + SPLIT COLUMNS
            for (let row of rows) {
                let cols = row.match(/(?:\"([^\"]*(?:\"\"[^\"]*)*)\")|([^\",]+)/g);
                if (cols != null){
                    if (date.toLocaleDateString() == cols[0]){
                        const data = cols.slice(1,cols.length);
                        document.getElementById('verse').innerHTML = data;
                    };
                };
            };
        };


    };

    </script>
  </body>
</html>